<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-06-04 Tue 00:03 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linux手册</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="qxg" />
<link rel="shortcut icon" type="image/x-icon" href="/static/img/favicon.ico">
<link rel="stylesheet" type="text/css" href="/static/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="/static/css/readtheorg.css"/><link rel="stylesheet" type="text/css" href="/static/css/orgstyle.css"/>
<script src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="/static/js/readtheorg.js"></script>
<script type="text/javascript" src="/static/js/orgscript.js"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="/index.html"> UP </a>
 |
 <a accesskey="H" href="/index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Linux手册</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org50204b0">常用</a></li>
<li><a href="#org1f52eb1">数组</a></li>
<li><a href="#org3344349">map</a></li>
<li><a href="#orgad3f8bf">字符串</a></li>
<li><a href="#orgb0bf51d">循环</a></li>
<li><a href="#orgd600db0">常用if</a></li>
<li><a href="#orge5e177a">sleep</a></li>
<li><a href="#orgdc32fbc">sed</a>
<ul>
<li><a href="#org4af2c9c">[option]</a></li>
<li><a href="#org75b2cd7">[action]</a></li>
<li><a href="#org909c333">eg</a>
<ul>
<li><a href="#org8540409">使用变量</a></li>
<li><a href="#org1c1c945">修改文件</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgacdf6ec">ln</a>
<ul>
<li><a href="#orgbdb361b">针对文件建立链接</a></li>
<li><a href="#org1c61eb9">针对目录建立链接</a></li>
</ul>
</li>
<li><a href="#org6ca6642">后记</a></li>
</ul>
</div>
</div>
<div id="outline-container-org50204b0" class="outline-2">
<h2 id="org50204b0">常用</h2>
<div class="outline-text-2" id="text-org50204b0">
<ul class="org-ul">
<li><code>grep -RiP ./ "something"</code> 在当前目录中查找有something自研的文件，可配合less使用</li>
<li><code>ps aux | head -1; ps aux | grep -v "PID" | sort -nr -k3 | head -1</code> 查看cpu最高的进程</li>
<li><code>echo "hei" | cat -</code> ,其中 <code>-</code> 符号表示从标准输入中读取内容，而不是从文件中读取。</li>
<li><code>echo -n &gt; filename</code> 清空文件，不加-n则有换行符, <code>-e</code> 会处理输入中的转移字符，所以 <code>echo -en "\n"</code> 和 <code>echo</code> 的效果一样</li>
<li><code>jobs -l</code> 显示nohup后台任务</li>
<li><code>paste file1 file2</code> 将两个文件相同的行合并到一行，并用 <code>\t</code> 分割</li>
<li><code>cwd=$(cd `dirname $0`;pwd)</code> 获取当前文件的绝对路径，不能直接使用  <code>pwd</code> 获取,若在其他路径执行，则路径就变成了其他路径</li>
<li><code>export LESSCHARSET=utf-8</code> 解决less乱码</li>
</ul>
</div>
</div>
<div id="outline-container-org1f52eb1" class="outline-2">
<h2 id="org1f52eb1">数组</h2>
<div class="outline-text-2" id="text-org1f52eb1">
<ul class="org-ul">
<li>创建数组 <code>nums=()</code></li>
<li>添加成员 <code>nums=(${nums[*]} 2)</code> 注意没有逗号,or <code>len=${#nums[*]};nums[len+1]=2</code></li>
<li>数组长度 <code>length=${#nums[*]}</code> or <code>length=${#nums[@]}</code></li>
<li>删除元素
<ol class="org-ol">
<li><code>unset nums[1]</code> 删除下标为1的元素</li>
<li><code>unset nums</code> 清除整个数组</li>
</ol></li>
<li>分片访问 <code>${nums[@]:1:4}</code> 从下标1开始，访问4个元素</li>
<li>遍历数组 <code>for ((i=0; i&lt;${#nums[*]}; i++);do echo ${nums[$I]}; done</code> or <code>for v in ${nums[@]}; do echo $v; done</code></li>
</ul>
</div>
</div>
<div id="outline-container-org3344349" class="outline-2">
<h2 id="org3344349">map</h2>
<div class="outline-text-2" id="text-org3344349">
<ul class="org-ul">
<li>创建map <code>declare -A map=()</code> ,老版本创建方式可能是 <code>declare -a map=()</code></li>
<li>添加成员 <code>map["a"]</code>"hei"=</li>
<li>输出所有key <code>echo ${map[@]}</code></li>
<li>遍历map <code>for key in ${!map[*]}</code></li>
</ul>
</div>
</div>
<div id="outline-container-orgad3f8bf" class="outline-2">
<h2 id="orgad3f8bf">字符串</h2>
<div class="outline-text-2" id="text-orgad3f8bf">
<ul class="org-ul">
<li>去掉最后一个字符: <code>test=${test%?}</code></li>
<li>删除前5个字符: <code>test=${test:5}</code></li>
<li>删除右边的字符: <code>test=${test:0-5}</code></li>
<li>保留指定间隔字符: <code>test=${test:n1:n2}</code></li>
<li><p>
shell原样打印字符串到指定文件
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #75715E;">#</span><span style="color: #75715E;">!/bin/</span><span style="color: #F92672;">sh</span>
(
cat &lt;&lt;EOF
<span style="color: #E6DB74; font-weight: bold;">// &#25991;&#20214;&#20869;&#23481;</span>
<span style="color: #E6DB74; font-weight: bold;">EOF</span>
) &gt;/tmp/filename.txt
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orgb0bf51d" class="outline-2">
<h2 id="orgb0bf51d">循环</h2>
<div class="outline-text-2" id="text-orgb0bf51d">
<ul class="org-ul">
<li>for: <code>for j in {1..100..2}</code> 、 <code>for j in {1..100}</code></li>
<li>for循环按行读取
<ol class="org-ol">
<li><code>while read line ;do cmd ;done &lt; $filename</code></li>
<li><code>cat $filename | while read line; do cmd ;done</code></li>
<li><p>
<code>IFS=$(echo -en "\n");for line in $(cat filename);do cmd;done)</code> ,如果IFS不起作用，则换成下面这种
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #FD971F;">IFS</span>=<span style="color: #E6DB74;">'</span>
<span style="color: #E6DB74;">'</span>
</pre>
</div></li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-orgd600db0" class="outline-2">
<h2 id="orgd600db0">常用if</h2>
<div class="outline-text-2" id="text-orgd600db0">
<ul class="org-ul">
<li>数字相等判断 <code>if (( $a==$b ))</code></li>
<li>字符串是否为空 <code>if [ -z "$a" ]</code> 记得加 <code>"</code></li>
<li>字符串不为空 <code>if [ -n "$a" ]</code> 记得加 <code>"</code></li>
<li>文件是否存在 <code>if [ -f "/data/filename" ]</code></li>
</ul>
</div>
</div>
<div id="outline-container-orge5e177a" class="outline-2">
<h2 id="orge5e177a">sleep</h2>
<div class="outline-text-2" id="text-orge5e177a">
<ul class="org-ul">
<li><code>sleep 0.01</code>  睡眠1毫秒</li>
<li><code>sleep 1</code> 睡眠1s</li>
<li><code>sleep 1s</code> 睡眠1秒</li>
<li><code>sleep 1m</code> 睡眠1分</li>
<li><code>sleep 1h</code> 睡眠1小时</li>
</ul>
</div>
</div>
<div id="outline-container-orgdc32fbc" class="outline-2">
<h2 id="orgdc32fbc">sed</h2>
<div class="outline-text-2" id="text-orgdc32fbc">
<p>
对数据进行选取,替换,删除,新增的命令
使用方式 <code>sed [option] '[action]' filename</code>
</p>
</div>
<div id="outline-container-org4af2c9c" class="outline-3">
<h3 id="org4af2c9c">[option]</h3>
<div class="outline-text-3" id="text-org4af2c9c">
<p>
参数解析
</p>
<ul class="org-ul">
<li><code>-n</code> :一般sed会把所有数据输出到屏幕，而使用-n后，只会把经过sed命令处理的行输出到屏幕</li>
<li><code>-e</code> : 允许输入多条动作</li>
<li><code>-i</code> : 一般sed不会修改文件，只会将结果显示在屏幕，但是加上-i会修改文件。</li>
</ul>
</div>
</div>
<div id="outline-container-org75b2cd7" class="outline-3">
<h3 id="org75b2cd7">[action]</h3>
<div class="outline-text-3" id="text-org75b2cd7">
<p>
动作解析
</p>
<ul class="org-ul">
<li>a:追加，在某一行的后边添加一行或多行</li>
<li>c:行替换，用c后面的字符串替换原数据行</li>
<li>i:插入，在某一行的前边插入一行或多行。</li>
<li>d:删除，删除指定行</li>
<li>p:输出指定行</li>
<li>s:字符替换，用一个字符串替换另外一个字符串，与vim中的替换类似 <code>行范围s/新字符串/旧字符串/g</code></li>
</ul>
</div>
</div>
<div id="outline-container-org909c333" class="outline-3">
<h3 id="org909c333">eg</h3>
<div class="outline-text-3" id="text-org909c333">
<ul class="org-ul">
<li><code>sed -n '2p' student.txt</code> :查看当前文件的第二行,注意一定加上-n，如果没有-n将输出所有行。</li>
<li><code>sed '2,4d' student.txt</code> : 删除第二行到第四行的数据</li>
<li><code>sed '2a something' student.txt</code> :在第二行的后边加入一行内容</li>
<li><code>sed '2i something' student.txt</code> :在第二行的前边加入一行内容</li>
<li><code>sed '4c something' student.txt</code> :将第4行替换为something</li>
<li><code>sed '4s/70/100/g' student.txt</code> 将第四行的70替换为100，如果不加行数，则会替换全文内容。</li>
<li><code>sed -e 's/furong//g;s/fengjie//g' student.txt</code> -e指定多条命令，命令之间使用`;`隔开。</li>
</ul>
</div>
<div id="outline-container-org8540409" class="outline-4">
<h4 id="org8540409">使用变量</h4>
<div class="outline-text-4" id="text-org8540409">
<p>
需要通过符号 <code>$</code>  来使用,如
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #FD971F;">i</span>=1
sed -n <span style="color: #E6DB74;">"${i}p"</span> xx
</pre>
</div>
</div>
</div>
<div id="outline-container-org1c1c945" class="outline-4">
<h4 id="org1c1c945">修改文件</h4>
<div class="outline-text-4" id="text-org1c1c945">
<p>
通过-i 参数,如 <code>sed -i "s/first/second/g" filename.txt</code>
修改整行:通过正则表达式,如匹配有 port 的行,并整行替换: <code>sed -i 's/^port.*/port:8080/g' tmp.txt</code>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgacdf6ec" class="outline-2">
<h2 id="orgacdf6ec">ln</h2>
<div class="outline-text-2" id="text-orgacdf6ec">
<p>
建立软/硬链接
命令： <code>ln -s [源文件] [目标文件]</code>
</p>
</div>
<div id="outline-container-orgbdb361b" class="outline-3">
<h3 id="orgbdb361b">针对文件建立链接</h3>
<div class="outline-text-3" id="text-orgbdb361b">
<p>
链接分为硬链接和软链接。假设有一个文件/home/qxg/good,那么通过`ln /home/qxg/good /tmp/bad`创建该文件的硬链接，处于/tmp/下名为bad。那么在修改good文件的时候，bad文件也会跟着修改，但是删除good的时候，bad依然存在，可以理解为硬链接就是java中的引用，其只是指向了文件的实际位置。
而软链接就类似windows中的快捷方式，一般推荐使用软链接的形式。
但是注意一点，在创建链接的时候，源文件的路径一定要写绝对路径。
</p>
</div>
</div>
<div id="outline-container-org1c61eb9" class="outline-3">
<h3 id="org1c61eb9">针对目录建立链接</h3>
<div class="outline-text-3" id="text-org1c61eb9">
<p>
目录只能使用软链接来进行创建，创建方式和软链接一样： <code>ln -s /home/dir/one /home/dir/two</code> 
</p>
</div>
</div>
</div>
<div id="outline-container-org6ca6642" class="outline-2">
<h2 id="org6ca6642">后记</h2>
<div class="outline-text-2" id="text-org6ca6642">
<p>
本来想把linux的笔记从简书搬运过来，但是太多内容了，还是算了吧，以后再说吧
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: qxg</p>
<p class="date">Created: 2019-06-04 Tue 00:03</p>
<p class="validation"></p>
</div>
</body>
</html>
